<!DOCTYPE html>
<html>
	<head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">		
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>Topicview</title>
		<link rel="stylesheet" href="css/navigation.css"/>
		<link rel="stylesheet" href="css/topicview.css"/>
		<link rel="stylesheet" href="css/editview.css"/>
		<link rel="stylesheet" href="css/uiutils.css"/>
		<link rel="stylesheet" href="css/css.css"/>
		<link rel="stylesheet" href="css/objekt.css"/>
		<script src="js/lib/navigation.js" type="text/javascript"></script>
		<script src="js/lib/xhr.js" type="text/javascript"></script>
		<script src="js/lib/sharedutils.js" type="text/javascript"></script>
		<script src="js/lib/uiutils.js" type="text/javascript"></script>
		<script src="js/lib/eventhandling.js" type="text/javascript"></script>
		<script src="js/lib/indexeddb.js" type="text/javascript"></script>
		<script src="js/lib/ixdb.js" type="text/javascript"></script>	
		<script src="js/lib/indexeddb.js" type="text/javascript"></script>		
		<script src="js/TopicviewCRUDOperations.js" type="text/javascript"></script>
		<script src="js/TitleFormViewController.js" type="text/javascript"></script>
		<script src="js/EinfuehrungstextFormViewController.js" type="text/javascript"></script>
		<script src="js/EditviewViewController.js" type="text/javascript"></script>
		<script src="js/TopicviewViewController.js" type="text/javascript"></script>
		<script src="js/ObjektFormViewController.js" type="text/javascript"></script>
		<script src="js/ObjektlistViewController.js" type="text/javascript"></script>
		<script src="js/TopicviewCRUDOperationsLocal.js" type="text/javascript"></script>
		<script src="js/TopicviewCRUDOperationsSynced.js" type="text/javascript"></script>
		<script src="js/DataItemCRUDOperations.js" type="text/javascript"></script>
		<script src="js/ListviewViewController.js" type="text/javascript"></script>
	</head>
	<!-- after loading the document, we try to readout a topicview description from the server -->
	<body onload="vc.initialiseView()">
		<header>
			<nav>
				<a href="javascript:iam.navigation.previousView();" id="navigation_button">&lt;&lt; Zurück</a>
				<!--<a href="titlelist.html" id="navigation_button" class="left">&lt;&lt; Zurück</a>-->
				<a href="#" id="switchImplButton" class="right">lorem</a>
			</nav>
		</header>
		<article id="mainview">
			<h1 id="topic_title">Lorem Ipsum</h1>
			<div id="contentscrollview">
				<div id="contentview">
					<div id="column_left" class="render_container">
						<section id="objekt" hidden="hidden">
							<h2>Objekt</h2>
							<span id="objekt-control"></span>
							<figure>
								<img src="/content/img/klein_hm_mit_bk_tragelehn.jpg"/>
								<figcaption>lorem ipsum</figcaption>
							</figure>
						</section>
					</div>
					<div id="column_middle" class="render_container"></div>
					<div id="column_right" class="render_container"></div>
				</div>
			</div>
		</article>
		<footer>
			<nav>
				<ul id="actionbar_title">
					<li>
						<a id="createTopicviewAction" href="javascript:vc.createTopicview()">Erstellen</a>
					</li>
					<li>
						<a href="javascript:vc.updateTopicview()">Ändern</a>
					</li>
					<li>
						<a href="javascript:vc.deleteTopicview()">Löschen</a>
					</li>
					<li>
						<a href="javascript:vc.toggleActionbar()">&gt;&gt;</a>
					</li>
				</ul>
				<ul id="actionbar_object" class="hidden">
					<li>
						<a href="javascript:vc.toggleActionbar()">&lt;&lt;</a>
					</li>
					<li>
						<a href="javascript:vc.createObject()">Neues Objekt</a>
					</li>
					<li>
						<a href="javascript:vc.updateObject()">Objekt ändern</a>
					</li>
					<li>
						<a href="javascript:vc.deleteObject()">Objekt löschen</a>
					</li>
				</ul>
			</nav>
		</footer>
		<!-- the editview that is layed over the rest of the view. Notice how keeping/closing the editview is handled in the onclick handlers in EditviewViewController! -->
		<div id="editview">
			<!-- the tabview solution is taken from http://www.sitepoint.com/css3-tabs-using-target-selector/ -->
			<article class="tabsContainer">
				<section id="tab_title">
					<h2><a href="#tab_title">Titel</a></h2>
					<p>
						<form name="form_title" action="/http2mdb/topicviews" method="post" onsubmit="return confirm('submit?')">
							<input name="title" placeholder="Titel" required="required" autofocus="autofocus" autocomplete="off"/>
							<input type="submit" value="Erzeugen" name="submit"/>
						</form>
						<button id="deleteTitleButton">
							Löschen
						</button>
					</p>
				</section>
				<section id="tab_objekt">
					<h2><a href="#tab_objekt">Objekt</a></h2>
					<p>
						<form id="form_objekt">
							<fieldset class="radiogroup">
								<input type="radio" name="objektContentMode" value="url" id="objektContentModeUrl" checked="checked"/>
								<label for="objektContentModeUrl">URL</label>
								<input type="radio" name="objektContentMode" value="upload" id="objektContentModeUpload"/>
								<label for="objektContentModeUpload">Upload</label>
								<input type="radio" name="objektContentMode" value="list" id="objektContentModeList"/>
								<label for="objektContentModeList">Liste</label>
							</fieldset>
							<input type="text" placeholder="Titel" required="required" name="title"/>
							<input type="url" placeholder="URL" name="src"/>
							<input type="file" name="upload" accept="image/*"/>
							<input type="text" placeholder="ObjektID" name="list" />
							<input type="text" placeholder="Beschreibung" name="description"/>
							<input type="submit" value="" name="submit"/>
						</form>
						<button id="deleteObjektButton" name="remove" disabled>Löschen</button> 
					</p>
				</section>
			</article>
		</div>
		<!-- another div: the toast that will popup from time to time -->
		<div class="toast">
			lorem ipsum
		</div>
		<!-- and finally a div that contains the tabs that will be added to the tabs container on creating new elements -->
		<div class="inactiveTabsContainer">
			<section id="tab_newElement">
				<h2><a href="#tab_newElement">+</a></h2>
				<p>
					<datalist id="elementTypes">
						<option value="zeitdokumente">Zeitdokumente</option>
						<option value="einfuehrungstext">Einführungstext</option>
						<option value="textauszug">Textauszug</option>
						<option value="objekt">Objekt</option>
					</datalist>
					<form id="form_addElement">
						<!-- <input name="elementType" placeholder="Elementtyp" list="elementTypes" autocomplete="off"> -->
						<select name="elementType" list="elementTypes">
							<option value="zeitdokumente">Zeitdokumente</option>
							<option value="einfuehrungstext">Einführungstext</option>
							<option value="textauszug" disabled="disabled">Textauszug</option>
							<option value="objekt">Objekt</option>
						</select>
						<input type="submit" value="Erzeugen"/>
					</form>
				</p>
			</section>
			<section id="tab_einfuehrungstext">
				<h2><a href="#tab_einfuehrungstext">Einführungstext</a></h2>
				<!-- we use a multipart form -->
				<form id="form_einfuehrungstext" action="http2mdb/content" method="post" enctype="multipart/form-data" target="multipart_target">
					<output class="validationMessages"></output>
					<!-- the radio buttons and labels for selecting how to provide the content -->
					<fieldset class="radiogroup">
						<input type="radio" name="contentMode" value="href" id="contentMode_txt"/>
						<label for="contentMode_txt">Text eingeben</label>
						<input type="radio" name="contentMode" value="fileupload" id="contentMode_fileupload"/>
						<label for="contentMode_fileupload">Datei hochladen</label>
						<input type="radio" name="contentMode" value="fileupload_formdata" id="contentMode_fileupload_formdata"/>
						<label for="contentMode_fileupload_formdata">Datei mit FormData hochladen</label>
					</fieldset>
					<!-- the two options for identifying the content that depend on the chosen contentMode -->
					<textarea name="txt" required="required" placeholder="Einführungstext" disabled="disabled" cols="40" rows="3"></textarea>
					<input type="file" name="src" required="required" />
					<!-- two hidden fields that are hard-coded here and will be used for creating the einfuehrungstext object -->
					<input type="hidden" name="type" value="einfuehrungstext"/>
					<input type="hidden" name="render_container" value="left"/>
					<!-- the submit action -->
					<input type="submit" value="Erzeugen"/>
				</form>
			</section>
			<section id="tab_objektList">
				<h2><a href="#tab_objektList">Alle Objekte</a></h2>
				<div class="scrollview">
					<p>
						Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
					</p>
				</div>
			</section>
		</div>
		<!-- the invisible target of a file upload that will receive a script from the http response. The script will callback the editview.js -->
		<iframe name="multipart_target" src="#"></iframe>
		<script>
			var vc = iam.controller.topicview.newInstance();
			//var of = iam.controller.objektform.newInstance(topicid, eventDispatcher, crudops);
			//var ol = iam.controller.objektlist.newInstance(topicid, eventDispatcher, crudops);
		</script>
	</body>
</html>